# config/config.yaml

# Sensitive info must be provided as environment variables in the .env file

# --- Buffer Settings ---
bufferSize: 10 # Max messages in buffer before forced flush
bufferTimeWindowMs: 5000 # Max time (ms) a message stays in buffer before flush

# --- Scoring Thresholds ---
scoreThresholdRespond: 25 # Score >= this triggers immediate response
scoreThresholdDiscard: -10 # Score <= this triggers discard

# --- Context Management ---
contextMaxMessages: 20 # Max number of messages to keep in channel context
contextMaxAgeSeconds: 3600 # Max age (seconds) for messages in context (1 hour)

# --- Logging ---
logLevel: "info" # Options: trace, debug, info, warn, error

# --- File Paths (Absolute paths recommended, required if not using defaults) ---
# These paths MUST be absolute paths or correctly resolvable by the environment.
# If using environment variables (e.g., PERSONA_PROMPT_FILE_PATH), they take precedence.
personaPromptFile: "" # ABSOLUTE path to prompts.yaml
scoringRulesFile: "" # ABSOLUTE path to scoring_rules.json
contextStoragePath: "" # ABSOLUTE path to directory for context files

# æ–°å¢žï¼šè¯­è¨€é…ç½®ç³»ç»Ÿ
language:
  # å…¨å±€é»˜è®¤è¯­è¨€è®¾ç½®
  defaultPrimary: "auto"    # é»˜è®¤ä¸»è¯­è¨€ï¼ˆauto=è‡ªåŠ¨æ£€æµ‹ï¼‰
  defaultFallback: "en"     # é»˜è®¤åŽå¤‡è¯­è¨€
  autoDetectEnabled: true   # æ˜¯å¦å¯ç”¨è‡ªåŠ¨è¯­è¨€æ£€æµ‹
  
  # æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ï¼ˆç”¨äºŽUIæ˜¾ç¤ºï¼‰
  supportedLanguages:
    - code: "auto"
      name: "ðŸ¤– è‡ªåŠ¨æ£€æµ‹"
      flag: "ðŸŒ"
    - code: "zh"
      name: "ä¸­æ–‡"
      flag: "ðŸ‡¨ðŸ‡³"
    - code: "en" 
      name: "English"
      flag: "ðŸ‡ºðŸ‡¸"
    - code: "ja"
      name: "æ—¥æœ¬èªž"
      flag: "ðŸ‡¯ðŸ‡µ"
    - code: "ko"
      name: "í•œêµ­ì–´"
      flag: "ðŸ‡°ðŸ‡·"
    - code: "es"
      name: "EspaÃ±ol"
      flag: "ðŸ‡ªðŸ‡¸"
    - code: "fr"
      name: "FranÃ§ais"
      flag: "ðŸ‡«ðŸ‡·"
    - code: "de"
      name: "Deutsch"
      flag: "ðŸ‡©ðŸ‡ª"
    - code: "ru"
      name: "Ð ÑƒÑÑÐºÐ¸Ð¹"
      flag: "ðŸ‡·ðŸ‡º"
    - code: "pt"
      name: "PortuguÃªs"
      flag: "ðŸ‡µðŸ‡¹"

# æ–°å¢žï¼šæ€»ç»“åŠŸèƒ½é…ç½®
summary:
  # å…¨å±€æ€»ç»“åŠŸèƒ½è®¾ç½®
  enabled: true
  
  # æ¶ˆæ¯æ•°é‡é™åˆ¶
  minMessages: 3
  maxMessages: 50
  defaultCount: 10
  
  # é¢„è®¾é€‰é¡¹
  presetCounts: [5, 10, 15, 20]
  
  # æ€§èƒ½å’Œå®‰å…¨é™åˆ¶
  cooldownSeconds: 30        # ç”¨æˆ·ä½¿ç”¨é—´éš”
  maxConcurrentSummaries: 5  # åŒæ—¶è¿›è¡Œçš„æ€»ç»“æ•°é‡
  timeoutSeconds: 120        # æ€»ç»“è¶…æ—¶æ—¶é—´
  
  # é»˜è®¤æœåŠ¡å™¨è®¾ç½®
  defaultServerSettings:
    enabled: true
    maxMessagesPerSummary: 50
    cooldownSeconds: 30
    allowedRoles: []          # ç©ºæ•°ç»„è¡¨ç¤ºæ‰€æœ‰äººéƒ½å¯ä»¥ä½¿ç”¨
    bannedChannels: []        # ç¦æ­¢æ€»ç»“çš„é¢‘é“

# æ–°å¢žï¼šé¢‘é“ç®¡ç†é»˜è®¤é…ç½®
channelManagement:
  # é»˜è®¤é¢‘é“é…ç½®æ¨¡å¼
  defaultMode: "whitelist"    # whitelist | blacklist
  autoManageNewChannels: true # è‡ªåŠ¨ç®¡ç†æ–°åˆ›å»ºçš„é¢‘é“
  
  # UIé…ç½®
  maxChannelsPerPage: 20      # æ¯é¡µæ˜¾ç¤ºçš„é¢‘é“æ•°é‡
  sortBy: "position"          # position | name | type